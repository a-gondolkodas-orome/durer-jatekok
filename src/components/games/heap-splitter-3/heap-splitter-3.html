<div>
  <p class="text-justify">
    Ez a játék a VIII. Dürer döntőjén szerepelt B kategóriában. A pályán kezdetben 37 korong van, három kupacban.
    A soron következő játékos először az egyik kupacot teljes egészében kiveszi a játékból;
    majd egy másik kupacot kettéoszt két kisebb kupacra (mindkettőbe legalább 1 korongnak kerülnie kell).
    Egy lépést követően tehát újra három kupac marad. Az a játékos veszít, aki nem tud szabályosan
    lépni (azaz egyik kupacot se tudja szétosztani).

    Az új leosztás gombra kattintva generálhatsz egy felállást. A felállás ismeretében te döntheted el, hogy kezdeni
    szeretnél-e, vagy második játékos lenni.
    Sok sikert! :)
  </p>
  <div class="flex flex-wrap" id="heap-splitter">
    <div class="game__board">
      <div v-for="rowIndex in [0, 1, 2]" class="game__pile" :class="{ 'border-b-black border-b-2': rowIndex === 2 }">
        <template v-for="(_, pieceIndex) in board[rowIndex]">
          <span
            v-if="shouldShowDividerToTheLeft({ rowIndex, pieceIndex })"
            class="inline-block border-r-black border-r-4 h-16 border-dotted -ml-1"
          ></span>
          <span
            :class="{ 'bg-red-600': rowColor({ rowIndex }) === 'red', 'bg-blue-600': rowColor({ rowIndex }) === 'blue', 'opacity-50': (!shouldPlayerMoveNext && isGameInProgress) || rowIndex === removedRowIndex }"
            class="game__piece rounded-full mr-1"
            :style="{ 'pointer-events': shouldPlayerMoveNext ? 'auto' : 'none', 'cursor': pieceClickNotAllowed({ rowIndex, pieceIndex }) ? 'not-allowed' : 'pointer' }"
            @click="clickPiece({ rowIndex, pieceIndex })"
            @mouseover="hoveredPiece = { rowIndex, pieceIndex }"
            @mouseout="hoveredPiece = null"
          ></span>
        </template>
        <span class="inline-block h-16 align-middle px-2 text-xl -mt-4">
          {{ currentChoiceDescription(rowIndex) }}
        </span>
      </div>
    </div>
    <div class="p-1 flex flex-col flex-grow flex-shrink-0 basis-80">
      <p class="text-center font-bold text-lg">{{ ctaText }}</p>
      <enemy-loader />
      <p class="italic text-justify">{{ stepDescription }}</p>
      <button
        v-if="isGameReadyToStart"
        class="game__cta-button js-first-player"
        @click="startGameAsPlayer({ isFirst: true })"
      >
        Kezdő leszek
      </button>
      <button
        v-if="isGameReadyToStart"
        class="game__cta-button js-second-player"
        @click="startGameAsPlayer({ isFirst: false })"
      >
        Második leszek
      </button>
      <div class="flex flex-grow items-end">
        <button class="game__cta-button mt-4 js-restart-game" @click="initializeGame()">
          Új leosztás
        </button>
      </div>
    </div>
  </div>
</div>
