<div class="flex justify-center">
  <div class="max-w-[100ch] w-full">
    <game-rule>
      Adott egy téglatest rácsa, aminek be van húzva az egyik testátlója. 
      Egy lépésben az éppen soron lévő játékos megszínezi valamelyik még színezetlen csúcsot három szín valamelyikével 
      (azaz piros, sárga vagy kék korongot tesz rá) úgy, hogy ne keletkezzen két szomszédos csúcs, amik azonos színűek. 
      Ha valamelyik játékos nem tud lépni, akkor véget ér a játék. 
      A kezdő játékos nyer, ha minden csúcs meg lett színezve, míg a második akkor nyer, ha van olyan csúcs ami nem lett kiszínezve.
  
      Te döntheted el, hogy kezdeni szeretnél-e, vagy második játékos lenni.
      Sok sikert! :)
    </game-rule>
    <div class="flex flex-wrap" id="cube-coloring">
      <div class="p-2 shrink-0 grow basis-2/3">
        <button
          :disabled="!shouldPlayerMoveNext"
          class="w-[30%] mx-[1%] rounded text-xl bg-red-600"
          :class="{ 'bg-opacity-50': !show || color != 'red' }"
          @click="pick('red')"
        >Piros</button>
        <button
          :disabled="!shouldPlayerMoveNext"
          class="w-[30%] mx-[1%] rounded text-xl bg-green-600"
          :class="{ 'bg-opacity-50': !show || color != 'green' }"
          @click="pick('green')"
        >Zöld</button>
        <button
          :disabled="!shouldPlayerMoveNext"
          class="w-[30%] mx-[1%] rounded text-xl bg-blue-600"
          :class="{ 'bg-opacity-50': !show || color != 'blue' }"
          @click="pick('blue')"
        >Kék</button>

        <svg @mousemove="drawPickedColor" class="aspect-square stroke-black stroke-[3]">
          <!-- front and back face -->
          <rect x="8%" y="25%" width="66%" height="66%" class="fill-transparent" />
          <rect x="25%" y="8%" width="66%" height="66%" class="fill-transparent" />
          
          <!-- 4 edges connecting front and back face -->
          <line x1="8%" y1="25%" x2="25%" y2="8%"/>
          <line x1="74%" y1="25%" x2="91%" y2="8%"/>
          <line x1="74%" y1="91%" x2="91%" y2="74%"/>
          <line x1="8%" y1="91%" x2="25%" y2="74%"/>
          <!-- main diagonal -->
          <line x1="74%" y1="91%" x2="25%" y2="8%"/>

          <!-- 8 nodes -->
          <circle
            v-for="nodeId in [0, 1, 2, 3, 4, 5, 6, 7]" :key="nodeId"
            :cx="cubeCoords[nodeId].cx" :cy="cubeCoords[nodeId].cy" r="4%"
            @click="setColor(nodeId)" v-on:keyup.enter="setColor(nodeId)"
            :tabindex="isMoveAllowed(nodeId) ? 0 : 'none'"
            :fill="board[nodeId] || (isMoveAllowed(nodeId) || !show ? 'white' : 'gray')"
          />

          <!-- cursor position with to-be-used color -->
          <circle v-if="show" :cx="x" :cy="y" r="4%" :fill="color" class="pointer-events-none opacity-50 stroke-0" />
        </svg>
      </div>
      <game-sidebar @restart="resetTurnState()">
        <template #step-description>
          Válassz színt, majd színezz meg egy csúcsot!
        </template>
      </game-sidebar>
    </div>
  </div>
</div>
